<html lang="en" class="alectryon-standalone"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././src/alectryon.css"></link><link rel="stylesheet" href="../../.././src/pygments.css"></link><link rel="stylesheet" href="../../.././src/docutils_basic.css"></link><link rel="shortcut icon" href="../../.././favicon.ico"></link><script defer="true" src="../../.././src/alectryon.js"></script></head><body><article class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/leanprover/doc-gen4">doc-gen4</a>, running Lean4.
      Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents.
      Use <kbd>Ctrl+↑</kbd><kbd>Ctrl+↓</kbd>to navigate, <kbd>Ctrl+🖱️</kbd>to focus.
      On Mac, use <kbd>Cmd</kbd>instead of <kbd>Ctrl</kbd>.
    </div><pre class="alectryon-io highlight"><span class="alectryon-wsp"><span class="alectryon-token">import Mt.Reservation
import Mt.Task.Basic

</span><span class="alectryon-token"><span class="k">namespace</span></span><span class="alectryon-token"> Mt.TaskM

</span><span class="alectryon-token"><span class="k">variable</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Spec</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Spec</span><span class="alectryon-token">}
</span><span class="alectryon-token"><span class="k">local</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>instance</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn"><a href="../../.././Mt/Reservation.html#Mt.IsReservation">IsReservation</a> <span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span></span></div></blockquote></div></small></div><span class="k">instance</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IsReservation</var><b>: </b><span><span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>IsReservation</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_reservation</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><a href="../../.././Mt/Reservation.html#Mt.IsReservation">IsReservation</a> <span class="fn"><span class="fn">self</span>.Reservation</span></span></span></span></span></div></blockquote></div></small></div>is_reservation</span><span class="alectryon-token">

/-- Validation primitive for reasoning for composable tasks.

  Validation may assume `assuming` and must ensure the following:
  * The task has to behave conform to the specification at all times
  * The task never panics
  * Finally, `motive` holds after the task completes

  ### Proving `valid`
  The definition is rather cumbersome to work with. You should use
  helper theorems like `valid_pure`, `valid_bind`, `valid_rmr`, ...

  They are designed to be used with the `apply` tactic.

  ### Blocking predicate: `assuming`
  When validating our task, we can assume `assuming state = true`. However,
  in most cases we have `assuming = λ _ => true`, i.e. our hypothesis does
  not provide anything useful.

  There is one important exception: Blocking threads. If a thread
  waits for a certain condition before it continues its task, we can
  safely assume that this condition holds when the task is excuting.

  ### Final goal: `motive`
  A valid thread must drop its reservations in the end. Therefore, the
  final goal on those tasks is `λ _ r => r = IsReservation.empty`.
  However, intermediate tasks (i.e. single operations) do not need to
  share this goal.
  
  In fact, they usally do not. If one operation
  prepares the next operation, it usually creates some reservation to
  ensure that no other thread undos this preparation. In this example,
  the motive should encode that the preparation has been made.

  `motive` is the only way to pass facts from one iteration to the next.
  See `valid_bind` for more information.
-/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} →
    <span class="fn"><span class="fn">(_ : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>) ×' <span class="fn">(_ : <span class="fn"><span class="fn">spec</span>.Reservation</span>) ×' <span class="fn">(_ : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) ×' (<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>)</span></span></span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Prop</span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Prop</span><span class="alectryon-token"> :=∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.51</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.54</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.54</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.51</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.54</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> → ∃ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">,
    </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">h</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.54</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.51</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> ∧ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Panic</span><span class="alectryon-token"> .. => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>False</var><b>: </b><span><span class="fn">Prop</span></span></span></div></blockquote></div></small></div>False</span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> =>
        </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.51</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> ∧
        </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">
</span><span class="alectryon-token"><span class="k">termination_by</span></span><span class="alectryon-token"> valid => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token">
</span><span class="alectryon-token"><span class="k">decreasing_by</span></span><span class="alectryon-token"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk0" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk0"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp_wf</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk1" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk1"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn">(<span class="fn"><a href="../../.././Init/WF.html#invImage">invImage</a>
      (<span class="fn">fun <span class="fn">a</span> =&gt <span class="fn"><a href="../../.././Init/Core.html#PSigma.casesOn">PSigma.casesOn</a> <span class="fn">a</span> <span class="fn">fun <span class="fn">p</span> <span class="fn">snd</span> =&gt <span class="fn"><a href="../../.././Init/Core.html#PSigma.casesOn">PSigma.casesOn</a> <span class="fn">snd</span> <span class="fn">fun <span class="fn">r</span> <span class="fn">snd</span> =&gt <span class="fn"><a href="../../.././Init/Core.html#PSigma.casesOn">PSigma.casesOn</a> <span class="fn">snd</span> <span class="fn">fun <span class="fn">assuming</span> <span class="fn">snd</span> =&gt <span class="fn">p</span></span></span></span></span></span></span></span>)
      <span class="fn">instWf</span></span>).1</span>
  <span class="fn">{ <span class="fn">fst</span> := <span class="fn">cont</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">r'</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">block_until</span>, <span class="fn">snd</span> := <span class="fn">motive</span> }</span> }</span> }</span>
  <span class="fn">{ <span class="fn">fst</span> := <span class="fn">p</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">r</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">assuming</span>, <span class="fn">snd</span> := <span class="fn">motive</span> }</span> }</span> }</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk2" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk2"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk3" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk3"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn">(<span class="fn"><a href="../../.././Init/WF.html#invImage">invImage</a>
      (<span class="fn">fun <span class="fn">a</span> =&gt <span class="fn"><a href="../../.././Init/Core.html#PSigma.casesOn">PSigma.casesOn</a> <span class="fn">a</span> <span class="fn">fun <span class="fn">p</span> <span class="fn">snd</span> =&gt <span class="fn"><a href="../../.././Init/Core.html#PSigma.casesOn">PSigma.casesOn</a> <span class="fn">snd</span> <span class="fn">fun <span class="fn">r</span> <span class="fn">snd</span> =&gt <span class="fn"><a href="../../.././Init/Core.html#PSigma.casesOn">PSigma.casesOn</a> <span class="fn">snd</span> <span class="fn">fun <span class="fn">assuming</span> <span class="fn">snd</span> =&gt <span class="fn">p</span></span></span></span></span></span></span></span>)
      <span class="fn">instWf</span></span>).1</span>
  <span class="fn">{ <span class="fn">fst</span> := <span class="fn">cont</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">r'</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">block_until</span>, <span class="fn">snd</span> := <span class="fn">motive</span> }</span> }</span> }</span>
  <span class="fn">{ <span class="fn">fst</span> := <span class="fn">p</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">r</span>, <span class="fn">snd</span> := <span class="fn">{ <span class="fn">fst</span> := <span class="fn">assuming</span>, <span class="fn">snd</span> := <span class="fn">motive</span> }</span> }</span> }</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk4" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk4"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_direct_cont.running</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">p </span>cont : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>} {<span class="fn">s </span>s' : <span class="fn"><span class="fn">spec</span>.State</span>} {<span class="fn">block_until</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>},
  <span class="fn"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></span></span></span></span></div></blockquote></div></small></div>is_direct_cont.running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">h</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- To prove that `pure t` is valid you need to prove that the `motive` holds -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_pure</var><b>: </b><span><span class="fn">∀ {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">t</span> : <span class="fn">T</span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>} {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn"><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_pure</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">} {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.1199</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.1202</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.1205</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_valid</var><b>: </b><span><span class="fn">?m.1208</span></span></span></div></blockquote></div></small></div><span class="nv">is_valid</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.1205</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.1199</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span><span class="alectryon-token"> (spec :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.1213</span> → <span class="fn">Type ?u.1212</span></span>} → <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] → <span class="fn">{<span class="fn">α</span> : <span class="fn">Type ?u.1213</span>} → <span class="fn"><span class="fn">α</span> → <span class="fn"><span class="fn">f</span> <span class="fn">α</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.1199</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.1202</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.1205</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk5" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk5"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk6" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk6"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk7" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk7"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t_1</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t_1</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk8" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk8"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t_1</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t_1</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk9" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk9"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk10" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk10"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t_1</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t_1</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk11" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk11"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>t</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>is_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk12" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk12"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exists</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- To prove that `a >>= f` is valid you need to prove that both `a` and `f u`
  for all results `u` are valid.

  In many cases, `a` does something to prepare `f u`. Since only `f u` needs
  to fulfil the final motive, we can choose an arbitrary motive to validate `a`
  as "intermediate goal".

  To validate `f u` with the original `motive`, we can use the fact that the
  intermediate goal `motive_u` has been ensured by `a`. Motives use only results
  and reservations, which cannot be changed by other threads. Therefore, they
  stay valid even if other threads become active between `a` and `f u`. 
-/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_bind</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">U </span>V : <span class="fn">Type</span>}
  (<span class="fn">_x</span> :
    <span class="fn">(mu : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span>) ×'
      <span class="fn">(f : <span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) ×'
        <span class="fn">(r : <span class="fn"><span class="fn">spec</span>.Reservation</span>) ×'
          <span class="fn">(assuming : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) ×'
            <span class="fn">(motive : <span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) ×'
              <span class="fn">(motive_u : <span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) ×'
                <span class="fn">(_ : <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span>) ×'
                  <span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span></span></span></span></span>),
  <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn"><span class="fn">_x</span>.1</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn"><span class="fn"><span class="fn">_x</span>.2</span>.1</span></span>) <span class="fn"><span class="fn"><span class="fn"><span class="fn">_x</span>.2</span>.2</span>.1</span> <span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn">_x</span>.2</span>.2</span>.2</span>.1</span> <span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn">_x</span>.2</span>.2</span>.2</span>.2</span>.1</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_bind</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.1562</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive_u</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive_u</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Prop</span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.1559</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.1562</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive_u</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive_u</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn">?m.1595</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">?m.1598</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive_u</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive_u</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">?m.1598</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn">?m.1595</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> →
    (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">?m.1598</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn">?m.1595</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> (λ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn">?m.1613</span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span><a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></div></blockquote></div></small></div>true</span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.1565</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> >>= </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.1559</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.1562</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.1565</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk13" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk13"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk14" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk14"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk15" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk15"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk16" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk16"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk17" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk17"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk18" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk18"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming_true</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming_true</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk19" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk19"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk20" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk20"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk21" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk21"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate_bind</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">U </span>V : <span class="fn">Type</span>} (<span class="fn">mu</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span>) (<span class="fn">f</span> : <span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate_bind</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk22" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk22"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk23" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk23"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk24" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk24"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk25" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk25"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk26" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk26"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk27" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk27"><span class="alectryon-wsp"><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">at</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk28" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk28"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk29" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk29"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">cases</span></span><span class="alectryon-token"> iteration : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk30" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk30"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk31" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk31"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">all_goals</span></span><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk32" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk32"><span class="alectryon-wsp"><span class="alectryon-token">(
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk33" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk33"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> []</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk34" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk34"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk35" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk35"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">have</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn">?m.2547</span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming_true</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming_true</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk36" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk36"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk37" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk37"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk38" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk38"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <a href="../../.././Init/Prelude.html#False">False</a></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk39" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk39"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk40" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk40"><span class="alectryon-wsp"><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">at</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn">?m.2119</span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk41" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk41"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk42" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk42"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> [] </span><span class="alectryon-token"><span class="k">at</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">a✝</span> <span class="fn">r'</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">a✝</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk43" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk43"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk44" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk44"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">cases</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn">∃ <span class="fn">r'</span>, <a href="../../.././Init/Prelude.html#False">False</a></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>w✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic.intro</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <a href="../../.././Init/Prelude.html#False">False</a></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk45" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk45"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk46" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk46"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>w✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk47" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk47"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk48" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk48"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rename_i</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn">?m.2222</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><span class="fn">?m.2437</span> <span class="fn">r'</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#False">False</a></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic.intro</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <a href="../../.././Init/Prelude.html#False">False</a></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk49" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk49"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive_u</span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk50" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk50"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exists</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn">?m.2222</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">a✝</span> <span class="fn">r'</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">a✝</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk51" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk51"><span class="alectryon-wsp"><span class="alectryon-token">
  )</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">a✝</span> <span class="fn">r'</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">a✝</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk52" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk52"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk53" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk53"><span class="alectryon-wsp"><span class="alectryon-token">.</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">a✝</span> <span class="fn">r'</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">a✝</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk54" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk54"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive_u</span> <span class="fn">a✝</span> <span class="fn">r'</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝¹</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">a✝</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk55" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk55"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><span class="fn">?m.2223</span> <span class="fn">r'</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>left</var><b>: </b><span><span class="fn">∀ {<span class="fn">a </span>b : <span class="fn">Prop</span>}, <span class="fn"><span class="fn"><span class="fn">a</span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn">b</span></span> → <span class="fn">a</span></span></span></span></span></div></blockquote></div></small></div>left</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn">U</span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><span class="fn">?m.2223</span> <span class="fn">r'</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>right</var><b>: </b><span><span class="fn">∀ {<span class="fn">a </span>b : <span class="fn">Prop</span>}, <span class="fn"><span class="fn"><span class="fn">a</span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn">b</span></span> → <span class="fn">b</span></span></span></span></span></div></blockquote></div></small></div>right</span><span class="alectryon-token">⟩</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk56" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk56"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk57" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk57"><span class="alectryon-wsp"><span class="alectryon-token">.</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk58" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk58"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk59" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk59"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">constructor</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.left</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.right</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk60" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk60"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk61" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk61"><span class="alectryon-wsp"><span class="alectryon-token">.</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.left</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk62" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk62"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.left</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.right</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk63" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk63"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><span class="fn">?m.2641</span> <span class="fn">r'</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>left</var><b>: </b><span><span class="fn">∀ {<span class="fn">a </span>b : <span class="fn">Prop</span>}, <span class="fn"><span class="fn"><span class="fn">a</span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn">b</span></span> → <span class="fn">a</span></span></span></span></span></div></blockquote></div></small></div>left</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk64" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk64"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro</span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk65" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk65"><span class="alectryon-wsp"><span class="alectryon-token">.</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.right</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk66" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk66"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.right</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk67" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk67"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">have</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_direct_cont.running</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">p </span>cont : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>} {<span class="fn">s </span>s' : <span class="fn"><span class="fn">spec</span>.State</span>} {<span class="fn">block_until</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>},
  <span class="fn"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></span></span></span></span></div></blockquote></div></small></div>is_direct_cont.running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br><span><var>this</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">a✝</span> <span class="fn">mu</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.right</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk68" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk68"><span class="alectryon-wsp"><span class="alectryon-token">
      </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_u</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>r'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>mu_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">a✝²</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">a✝</span> <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive_u</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running.intro.right</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">a✝¹</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk69" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk69"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_bind</var><b>: </b><span><span class="fn">∀ {<span class="fn">U </span>V : <span class="fn">Type</span>} {<span class="fn">mu</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span>} {<span class="fn">f</span> : <span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><span class="fn">V</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>} (<span class="fn">motive_u</span> : <span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">mu</span> <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive_u</span></span> →
    <span class="fn">(<span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span>) →
      <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_bind</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive_u</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive_u</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu_valid</var><b>: </b><span><span class="fn"><span class="fn">?m.2641</span> <span class="fn">r'</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu_valid</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>right</var><b>: </b><span><span class="fn">∀ {<span class="fn">a </span>b : <span class="fn">Prop</span>}, <span class="fn"><span class="fn"><span class="fn">a</span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn">b</span></span> → <span class="fn">b</span></span></span></span></span></div></blockquote></div></small></div>right</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">r'</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">u</span> : <span class="fn">U</span>), <span class="fn"><span class="fn"><span class="fn">motive_u</span> <span class="fn">u</span> <span class="fn">r'</span></span> → <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">r'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">
</span><span class="alectryon-token"><span class="k">termination_by</span></span><span class="alectryon-token"> valid_bind => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
            | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_rmr</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.6607</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn">?m.6797</span> <span class="fn">env_r</span> <span class="fn">s</span></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">?m.6798</span> <span class="fn">env_r</span> <span class="fn">s</span> <span class="fn">r'</span> <span class="fn">t</span> <span class="fn">s'</span></span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.6617</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.6620</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.6610</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.6620</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.6617</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.6607</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.6620</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> → ∃ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">,
    </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.6620</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token">⟩ => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.6617</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> ∧ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.6613</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">
  )
  : (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify_read</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.6607</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.6610</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.6613</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk70" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk70"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk71" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk71"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk72" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk72"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk73" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk73"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk74" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk74"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk75" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk75"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming_true</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming_true</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk76" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk76"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk77" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk77"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk78" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk78"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate_rmr</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk79" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk79"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h :
    <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk80" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk80"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk81" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk81"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming_true</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming_true</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_rm</var><b>: </b><span><span class="fn">∀ {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let s' := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r'</span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify">atomic_read_modify</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_rm</span></span><span class="alectryon-token">
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn">?m.7259</span> <span class="fn">env_r</span> <span class="fn">s</span></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let s' := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">?m.7260</span> <span class="fn">env_r</span> <span class="fn">s</span> <span class="fn">r'</span> <span class="fn">s'</span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7167</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7170</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.7160</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7170</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7167</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7157</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7170</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> → ∃ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">,
    </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7170</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn">?m.7226</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7167</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn">?m.7226</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> ∧ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.7163</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⟨⟩</var><b>: </b><span><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></span></span></div></blockquote></div></small></div>⟨⟩</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">)
  : (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7157</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.7160</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.7163</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
            | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div>valid_rmr</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let s' := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_read</var><b>: </b><span><span class="fn">∀ {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let t := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read">atomic_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_read</span></span><span class="alectryon-token">
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.7474</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7481</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let t := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7491</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7494</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.7484</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7494</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7491</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7481</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7494</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> → ∃ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">,
    </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7494</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">?m.7550</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7491</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7494</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> ∧ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.7487</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">?m.7550</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">)
  : (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7481</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.7484</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.7487</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
            | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div>valid_rmr</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let t := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_assert</var><b>: </b><span><span class="fn">∀ {<span class="fn">cond</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn"><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span> →
    <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
        <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span>) →
      <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_assert</span></span><span class="alectryon-token">
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7801</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive_holds</var><b>: </b><span><span class="fn">?m.7810</span></span></span></div></blockquote></div></small></div><span class="nv">motive_holds</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.7807</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⟨⟩</var><b>: </b><span><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></span></span></div></blockquote></div></small></div>⟨⟩</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7801</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assertion_succeeds</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">assertion_succeeds</span></span><span class="alectryon-token"> : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7814</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7817</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.7804</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7817</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.7814</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7801</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7817</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7817</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">)
  : (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_assert</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>atomic_assert</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.7801</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.7804</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.7807</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk82" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk82"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk83" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk83"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk84" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk84"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk85" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk85"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk86" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk86"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk87" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk87"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming_true</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming_true</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk88" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk88"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk89" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk89"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk90" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk90"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate_assert</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} (<span class="fn">cond</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate_assert</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk91" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk91"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk92" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk92"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk93" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk93"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">have</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond_true</var><b>: </b><span><span class="fn">?m.8107</span></span></span></div></blockquote></div></small></div><span class="nv">cond_true</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assertion_succeeds</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">assertion_succeeds</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming_true</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming_true</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>cond_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk94" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk94"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk95" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk95"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>cond_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk96" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk96"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond_true</var><b>: </b><span><span class="fn">?m.8107</span></span></span></div></blockquote></div></small></div><span class="nv">cond_true</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>cond_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk97" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk97"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>assuming_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br><span><var>cond_true</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk98" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk98"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>motive_holds</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">motive</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">r</span></span></span></span></span><br></br><span><var>assertion_succeeds</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> → <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> → <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk99" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk99"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exists</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_blocking_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">block_until</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>} {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>}
  {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>} {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
            | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">valid_blocking_rmr</span></span><span class="alectryon-token">
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.8336</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">}
  {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.8349</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token"> : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.8359</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8362</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8362</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> →
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.8359</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.8349</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8362</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> → ∃ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">,
    </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8362</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token">⟩ => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>validate</var><b>: </b><span><span class="fn">(<span class="fn">self</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>) → <span class="fn"><span class="fn"><span class="fn">self</span>.Reservation</span> → <span class="fn"><span class="fn"><span class="fn">self</span>.State</span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>validate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn">?m.8359</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> + </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> ∧ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.8355</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r'</span></span><span class="alectryon-token">
  )
  : (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_blocking_rmr</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_blocking_rmr</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">).</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="na">valid</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn">?m.8349</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>assuming</var><b>: </b><span><span class="fn">?m.8352</span></span></span></div></blockquote></div></small></div><span class="nv">assuming</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>motive</var><b>: </b><span><span class="fn">?m.8355</span></span></span></div></blockquote></div></small></div><span class="nv">motive</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk100" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk100"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk101" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk101"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk102" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk102"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>) → <span class="fn">Prop</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>valid</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until_1</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until_1</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk103" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk103"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
        | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until_1</span> <span class="fn">cont</span></span> =&gt
          <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until_1</span> <span class="fn">motive</span></span></span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk104" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk104"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk105" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk105"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>env_r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">env_r</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>,
  <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">a</span> <span class="fn">a_1</span></span> =&gt <a href="../../.././Init/Prelude.html#False">False</a>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until_1</span> <span class="fn">cont</span></span> =&gt
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> <span class="fn">cont</span> <span class="fn">r'</span> <span class="fn">block_until_1</span> <span class="fn">motive</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk106" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk106"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk107" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk107"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> [</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate_blocking_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">block_until</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></span></span></span></div></blockquote></div></small></div>iterate_blocking_rmr</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true_and</var><b>: </b><span><span class="fn">∀ (<span class="fn">p</span> : <span class="fn">Prop</span>), <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#True">True</a> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn">p</span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">p</span></span></span></span></span></div></blockquote></div></small></div>true_and</span><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∃ <span class="fn">r'</span>, <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r'</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk108" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk108"><span class="alectryon-wsp"><span class="alectryon-token">
  
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk109" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk109"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exists</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>r</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></div></blockquote></div></small></div><span class="nv">r</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br><span><var>env_r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>initial_valid</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">block_until</span> <span class="fn">motive</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk110" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk110"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span><br></br><span><var>assuming</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>motive</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span></span></span></span><br></br><span><var>f_valid</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk111" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk111"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>initial_valid</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span></span></span></div></blockquote></div></small></div><span class="nv">initial_valid</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>valid_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>} {<span class="fn">assuming</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>}
  {<span class="fn">motive</span> : <span class="fn"><span class="fn">T</span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.Reservation</span> → <span class="fn">Prop</span></span></span>},
  <span class="fn">(<span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
      <span class="fn"><span class="fn"><span class="fn"><span class="fn">assuming</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
        <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
          <span class="fn">∃ <span class="fn">r'</span>,
            <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
            <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
            | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span>) →
    <span class="fn"><a href="../../.././Mt/Task/Validation.html#Mt.TaskM.valid">valid</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">r</span> <span class="fn">assuming</span> <span class="fn">motive</span></span></span></span></span></span></div></blockquote></div></small></div>valid_rmr</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f_valid</var><b>: </b><span><span class="fn">∀ (<span class="fn">env_r</span> : <span class="fn"><span class="fn">spec</span>.Reservation</span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><span class="fn"><span class="fn">block_until</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r</span></span>) <span class="fn">s</span></span> →
      <span class="fn">∃ <span class="fn">r'</span>,
        <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
        <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
        | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec.validate">Spec.validate</a> <span class="fn">spec</span> (<span class="fn"><span class="fn">env_r</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">r'</span></span>) <span class="fn">s'</span></span> <a href="../../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">motive</span> <span class="fn">t</span> <span class="fn">r'</span></span></span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f_valid</span></span><span class="alectryon-token">⟩</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">end</span></span><span class="alectryon-token"> Mt.TaskM</span></span></pre></article></body></html>