<html lang="en" class="alectryon-standalone"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././src/alectryon.css"></link><link rel="stylesheet" href="../../.././src/pygments.css"></link><link rel="stylesheet" href="../../.././src/docutils_basic.css"></link><link rel="shortcut icon" href="../../.././favicon.ico"></link><script defer="true" src="../../.././src/alectryon.js"></script></head><body><article class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/leanprover/doc-gen4">doc-gen4</a>, running Lean4.
      Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents.
      Use <kbd>Ctrl+↑</kbd><kbd>Ctrl+↓</kbd>to navigate, <kbd>Ctrl+🖱️</kbd>to focus.
      On Mac, use <kbd>Cmd</kbd>instead of <kbd>Ctrl</kbd>.
    </div><pre class="alectryon-io highlight"><span class="alectryon-wsp"><span class="alectryon-token">import Mt.Reservation
import Mt.Task.Impl

</span><span class="alectryon-token"><span class="k">namespace</span></span><span class="alectryon-token"> Mt

/-- Monad to describe single threaded algorithms. Tasks can be iterated
  step by step until they finally complete or panic.

  `TaskM` is a monad, i.e. you can use the do-notation to write code:

  ```
  import Mt.Task.Basic
  open Mt

  abbrev spec : Spec :={
    State := Nat,
    Reservation := UnitReservation,
    validate :=λ _ _ => True
  }

  def sample_task : TaskM spec Bool :=do
    if (<- TaskM.atomic_read λ n => n) > 100 then
      -- reset to 100
      TaskM.atomic_read_modify λ _ => 100
      return false
    
    TaskM.atomic_assert λ n => n < 500
    
    TaskM.atomic_read_modify λ n => n + 7
    return true 
  ```

  Note: `TaskM` hat an associative bind operator, but it is not
  a lawful monad: Binding two `pure` cannot be simplified into
  a single pure, because it requires two iterations to complete.
-/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Spec</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Spec</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.impl.TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM.impl.TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">

/-- The result of a single iteration of `TaskM`.

  Independent of the result, the resulting shared state after
  the iteration can be retrieved using `IterationResult.state`
-/
</span><span class="alectryon-token"><span class="k">inductive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.IterationResult</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.IterationResult</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Spec</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Spec</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">)
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Done</span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Sort ?u.17</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">IterationResult</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Panic</span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>String</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Sort ?u.17</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">IterationResult</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Running</span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">) -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Sort ?u.17</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">IterationResult</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">variable</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Spec</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Spec</span><span class="alectryon-token">}

</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.IterationResult.state</var><b>: </b><span><span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.IterationResult.state</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">} : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>IterationResult</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><span class="fn">?m.1240</span></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.1237</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><span class="fn">?m.1240</span></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> _ => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> _ => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> .. => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">instance</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.instMonad</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span></span>)</span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.instMonad</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Monad</var><b>: </b><span><span class="fn">(<span class="fn"><span class="fn">Type ?u.1655</span> → <span class="fn">Type ?u.1654</span></span>) → <span class="fn">Type (max (?u.1655 + 1) ?u.1654)</span></span></span></span></div></blockquote></div></small></div>Monad</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><span class="k">where</span></span><span class="alectryon-token">
  </span><span class="alectryon-token">pure</span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.pure</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.pure</span><span class="alectryon-token">
  </span><span class="alectryon-token">bind</span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.bind</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">U </span>V : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span> → <span class="fn">(<span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.bind</span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.bind_assoc</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">U </span>V W : <span class="fn">Type</span>} (<span class="fn">mu</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span>) (<span class="fn">f</span> : <span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) (<span class="fn">g</span> : <span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span>),
  <span class="fn">(<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">fun <span class="fn">u</span> =&gt <span class="fn"><span class="fn"><span class="fn">f</span> <span class="fn">u</span></span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">g</span></span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">g</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.bind_assoc</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>W</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">W</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>g</var><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">g</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>W</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">W</span></span><span class="alectryon-token">) :
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> >>= (</span><span class="alectryon-token"><span class="k">fun</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">?m.2694</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token"> => (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">?m.2694</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token">) >>= </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>g</var><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">g</span></span><span class="alectryon-token">) = (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> >>= </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) >>= </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>g</var><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">g</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk0" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk0"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V, W</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">fun <span class="fn">u</span> =&gt <span class="fn"><span class="fn"><span class="fn">f</span> <span class="fn">u</span></span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">g</span></span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">g</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk1" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk1"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> [</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bind.bind</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type ?u.2776</span> → <span class="fn">Type ?u.2775</span></span>} → <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Bind">Bind</a> <span class="fn">m</span></span>] → <span class="fn">{<span class="fn">α </span>β : <span class="fn">Type ?u.2776</span>} → <span class="fn"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span> → <span class="fn">(<span class="fn"><span class="fn">α</span> → <span class="fn"><span class="fn">m</span> <span class="fn">β</span></span></span>) → <span class="fn"><span class="fn">m</span> <span class="fn">β</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Bind.bind</span><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V, W</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">mu</span> <span class="fn">fun <span class="fn">u</span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">g</span></span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">mu</span> <span class="fn">f</span></span>) <span class="fn">g</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk2" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk2"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V, W</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">fun <span class="fn">u</span> =&gt <span class="fn"><span class="fn"><span class="fn">f</span> <span class="fn">u</span></span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">g</span></span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">g</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk3" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk3"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.bind_assoc</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">U </span>V W : <span class="fn">Type</span>} (<span class="fn">mu</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span>) (<span class="fn">f</span> : <span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) (<span class="fn">g</span> : <span class="fn"><span class="fn">V</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">W</span></span></span>),
  <span class="fn">(<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">mu</span> <span class="fn">fun <span class="fn">u</span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>) <span class="fn">g</span></span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">mu</span> <span class="fn">f</span></span>) <span class="fn">g</span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.bind_assoc</span><span class="alectryon-token"> ..</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Atomic `TaskM` primitive with read/write-access to the shared state.

  Additional to performing a read-modify operation, it returns a value.

  Example: Compare Exchange (https://en.wikipedia.org/wiki/Compare-and-swap)
 -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.atomic_read_modify_read</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.atomic_read_modify_read</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">

/-- Atomic `TaskM` primitive to perform read-modify operations on the
  shared state. It does not return anything. -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.atomic_read_modify</var><b>: </b><span><span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.atomic_read_modify</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> :=
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify_read</span><span class="alectryon-token"> λ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.2960</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> => ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⟨⟩</var><b>: </b><span><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></span></span></div></blockquote></div></small></div>⟨⟩</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.2960</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">⟩

/-- Atomic `TaskM` primitive to perform read the shared state. It
  does not change anything -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.atomic_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.atomic_read</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> :=
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify_read</span><span class="alectryon-token"> λ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.3046</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.3046</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">?m.3049</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> => ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">?m.3049</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.3046</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">⟩

/-- Atomic `TaskM` primitive which throws an exception. The current thread
  panics and will be removed from the system -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.panic</var><b>: </b><span><span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.panic</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>String</span><span class="alectryon-token">) : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> :=
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token">

/-- Atomic `TaskM` primitive to assert a given condition. The condition
  is checked atomically. If it returns `false`, the current thread panics. -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.atomic_assert</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.atomic_assert</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Unit</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Unit</span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.atomic_assert</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.atomic_assert</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">

/-- `TaskM` primitive which blocks the current thread until a given
  condition holds, and executes a read-modify-read operation afterwards.
  
  There are neither spurious wakeups nor race conditions: The system will
  only perform the read-modify-read operation if the provided condition
  holds. If it does not, the thread will block. -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.atomic_blocking_rmr</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.atomic_blocking_rmr</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.3233</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">)
  : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.3233</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.atomic_blocking_rmr</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.atomic_blocking_rmr</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">

/-- Iterate a given thread on a given state and provides an `IterationResult`.

  The task may complete or panic. If it is does not, it is still running
  and a continuation will be provided in the result -/
</span><span class="alectryon-token"><span class="k">def</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> ->
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>IterationResult</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> :=
  λ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn">?m.3329</span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.3332</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn">?m.3329</span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.3332</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.IterationResult.Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token">
  | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} →
  <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} →
    <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> =>
      </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token">

/-- Iteration of `pure t` always completes with result `t` -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_pure</var><b>: </b><span><span class="fn">∀ {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>) (<span class="fn">t</span> : <span class="fn">T</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_pure</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} :
  ∀ (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">),
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>pure</var><b>: </b><span><span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">Type ?u.3757</span> → <span class="fn">Type ?u.3756</span></span>} → <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Pure">Pure</a> <span class="fn">f</span></span>] → <span class="fn">{<span class="fn">α</span> : <span class="fn">Type ?u.3757</span>} → <span class="fn"><span class="fn">α</span> → <span class="fn"><span class="fn">f</span> <span class="fn">α</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>pure</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk4" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk4"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>) (<span class="fn">t</span> : <span class="fn">T</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk5" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk5"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intros</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>t✝</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t✝</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s✝</span> <span class="fn">t✝</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk6" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk6"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>) (<span class="fn">t</span> : <span class="fn">T</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk7" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk7"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>t✝</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t✝</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s✝</span> <span class="fn">t✝</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk8" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk8"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>) (<span class="fn">t</span> : <span class="fn">T</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">t</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk9" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk9"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rfl</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of `a >>= f` iterates `a` and returns a continuation.

  * If the `a` iteration has completed with result `t`, the next
    iteration will start work on `f t`
  * If the `a` iteration has not completed yet, the next iteration
    will continue.
  * If `a` has panicked, the exception is propagated.
 -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_bind</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">U </span>V : <span class="fn">Type</span>} (<span class="fn">mu</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span>) (<span class="fn">f</span> : <span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_bind</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>U</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">U</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>V</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">V</span></span><span class="alectryon-token">)
  : ∀ (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">),
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> >>= </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">U</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> (λ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>_</var><b>: </b><span><span class="fn">?m.3914</span></span></span></div></blockquote></div></small></div>_</span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>true</var><b>: </b><span><a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></div></blockquote></div></small></div>true</span><span class="alectryon-token">) (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>u</var><b>: </b><span><span class="fn">U</span></span></span></div></blockquote></div></small></div><span class="nv">u</span></span><span class="alectryon-token">)
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> =>
        </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> >>= </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk10" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk10"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk11" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk11"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
  <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk12" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk12"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk13" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk13"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> [</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bind.bind</var><b>: </b><span><span class="fn">{<span class="fn">m</span> : <span class="fn"><span class="fn">Type ?u.4143</span> → <span class="fn">Type ?u.4142</span></span>} → <span class="fn">[<span class="fn">self</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Bind">Bind</a> <span class="fn">m</span></span>] → <span class="fn">{<span class="fn">α </span>β : <span class="fn">Type ?u.4143</span>} → <span class="fn"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span> → <span class="fn">(<span class="fn"><span class="fn">α</span> → <span class="fn"><span class="fn">m</span> <span class="fn">β</span></span></span>) → <span class="fn"><span class="fn">m</span> <span class="fn">β</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>Bind.bind</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.bind</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">U </span>V : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span> → <span class="fn">(<span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.bind</span><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk14" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk14"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><span class="fn">mu</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><span class="fn">cont</span> <a href="../../.././Init/Prelude.html#Bind.bind">&gt&gt=</a> <span class="fn">f</span></span>)</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk15" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk15"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">cases</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>mu</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></div></blockquote></div></small></div><span class="nv">mu</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s, a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s, a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s, a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk16" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk16"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk17" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk17"><span class="alectryon-wsp"><span class="alectryon-token"><;></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s, a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">U</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Done</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s, a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Panic</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s, a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">Running</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk18" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk18"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>U, V</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>mu</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">U</span></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">U</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">V</span></span></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">match h : <span class="fn"><span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt
      <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match
    <span class="fn">match <span class="fn"><span class="fn">mu</span> <span class="fn">s</span></span> with
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
    | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">u</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> (<span class="fn">fun <span class="fn">x</span> =&gt <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">u</span></span>)</span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.bind">impl.TaskM.bind</a> <span class="fn">cont</span> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk19" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk19"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rfl</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of a read-modify-read-operation will perform the read modify
  and complete with the computed result. -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_rmr</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">}
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">)
  : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7722</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify_read</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7722</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7722</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token">⟩ => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">T</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk20" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk20"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk21" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk21"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intros</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s✝</span></span>;
  <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s✝</span></span> with
  | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk22" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk22"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk23" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk23"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s✝</span></span>;
  <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s✝</span></span> with
  | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk24" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk24"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk25" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk25"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rfl</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of a read-modify operation will perform the read modify
  operation and complete with `Unit.unit` -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_rm</var><b>: </b><span><span class="fn">∀ (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify">atomic_read_modify</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let s' := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_rm</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">)
  : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7888</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7888</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.7888</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn">?m.7904</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn">?m.7904</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⟨⟩</var><b>: </b><span><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></span></span></div></blockquote></div></small></div>⟨⟩</span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk26" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk26"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify">atomic_read_modify</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let s' := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk27" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk27"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate_rmr</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of a read operation will compute a value based on the
  current shared state and complete with the result -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_read</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.Reservation</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read">atomic_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let t := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_read</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.8188</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Reservation</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>Reservation</span><span class="alectryon-token">)
  : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8198</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">T</span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8198</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><span class="k">match</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8198</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">with</span></span><span class="alectryon-token">
    | </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">?m.8217</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> => </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8198</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>t</var><b>: </b><span><span class="fn">?m.8217</span></span></span></div></blockquote></div></small></div><span class="nv">t</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk28" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk28"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.Reservation</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read">atomic_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let t := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk29" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk29"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">let _discr := <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span>;
    <span class="fn">match <span class="fn"><span class="fn">f</span> <span class="fn">s</span></span> with
    | <span class="fn">(<span class="fn">t</span>, <span class="fn">s'</span>)</span> =&gt <span class="fn"><a href="../../.././Init/Prelude.html#Prod.mk">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate_rmr</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of a panic will fail -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_panic</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">msg</span> : <a href="../../.././Init/Prelude.html#String">String</a>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.panic">panic</a> <span class="fn">msg</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">msg</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_panic</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>String</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>String</span><span class="alectryon-token">)
  : ∀ (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">),
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>panic</span><span class="alectryon-token"> (T :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>msg</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div><span class="nv">msg</span></span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk30" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk30"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>msg</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.panic">panic</a> <span class="fn">msg</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">msg</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk31" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk31"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intros</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>msg</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.panic">panic</a> <span class="fn">msg</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s✝</span> <span class="fn">msg</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk32" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk32"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>msg</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.panic">panic</a> <span class="fn">msg</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">msg</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk33" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk33"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>msg</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.panic">panic</a> <span class="fn">msg</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s✝</span> <span class="fn">msg</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk34" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk34"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>msg</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.panic">panic</a> <span class="fn">msg</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">msg</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk35" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk35"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rfl</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of an assertion will atomically check the condition
  and succeed or fail depending on the result. -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_assert</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} (<span class="fn">cond</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_assert</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">)
  : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8539</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_assert</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>atomic_assert</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8539</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><span class="k">if</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8539</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">then</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Done</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Done</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8539</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>⟨⟩</var><b>: </b><span><a href="../../.././Init/Prelude.html#PUnit">PUnit</a></span></span></div></blockquote></div></small></div>⟨⟩</span><span class="alectryon-token">
  </span><span class="alectryon-token"><span class="k">else</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Panic</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Panic</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.8539</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>"Assertion failed"</var><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></div></blockquote></div></small></div>"Assertion failed"</span><span class="alectryon-token"> :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk36" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk36"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk37" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk37"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk38" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk38"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk39" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk39"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> [</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_assert</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>atomic_assert</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.atomic_assert</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.atomic_assert</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk40" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk40"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_assert">atomic_assert</a> <span class="fn">cond</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>     <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk41" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk41"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">cases</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cond</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">cond</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">false</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.false">false</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.false">false</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">true</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk42" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk42"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk43" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk43"><span class="alectryon-wsp"><span class="alectryon-token"><;></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">false</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.false">false</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.false">false</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">true</span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk44" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk44"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>cond</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>s</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">(<span class="fn">match
    <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    else <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><span class="fn"><span class="fn">cond</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s</span> <a href="../../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span> else <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s</span> <span class="fn">&quotAssertion failed&quot</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk45" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk45"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">simp</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">only</span></span><span class="alectryon-token"> [</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite_false</var><b>: </b><span><span class="fn">∀ {<span class="fn">α</span> : <span class="fn">Sort ?u.9809</span>} (<span class="fn">a </span>b : <span class="fn">α</span>), <span class="fn">(<span class="fn">if <a href="../../.././Init/Prelude.html#False">False</a> then <span class="fn">a</span> else <span class="fn">b</span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">b</span></span></span></span></span></div></blockquote></div></small></div>ite_false</span><span class="alectryon-token">, </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>ite_true</var><b>: </b><span><span class="fn">∀ {<span class="fn">α</span> : <span class="fn">Sort ?u.9817</span>} (<span class="fn">a </span>b : <span class="fn">α</span>), <span class="fn">(<span class="fn">if <a href="../../.././Init/Prelude.html#True">True</a> then <span class="fn">a</span> else <span class="fn">b</span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">a</span></span></span></span></span></div></blockquote></div></small></div>ite_true</span><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Iteration of a `atomic_blocking_rmr` operation will always
  return a continuation.
  
  The `IterationResult` contains the blocking predicate and
  the desired read-modify-read operation. The caller should ensure
  that the read-modify-operation is only iterated when the blocking
  predicate holds. -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.iterate_blocking_rmr</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} (<span class="fn">block_until</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) (<span class="fn">f</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.iterate_blocking_rmr</span></span><span class="alectryon-token">
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">)
  (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">?m.9923</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> × </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token">)
  : ∀ </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.9937</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">,
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_blocking_rmr</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_blocking_rmr</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.9937</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.9937</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token">
    </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>atomic_read_modify_read</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span>) → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></div></blockquote></div></small></div>atomic_read_modify_read</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>f</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">f</span></span><span class="alectryon-token">) :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk46" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk46"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk47" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk47"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intros</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s✝</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk48" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk48"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk49" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk49"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br><span><var>s✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s✝</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s✝</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk50" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk50"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><span class="fn">T</span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><span class="fn">spec</span>.State</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">s</span> : <span class="fn"><span class="fn">spec</span>.State</span>),
  <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_blocking_rmr">atomic_blocking_rmr</a> <span class="fn">block_until</span> <span class="fn">f</span></span>) <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s</span> <span class="fn">block_until</span> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.atomic_read_modify_read">atomic_read_modify_read</a> <span class="fn">f</span></span>)</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk51" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk51"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rfl</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

/-- Well founded relation on `TaskM` fulfilled by continuations with their parents.

  It can be used to perform well founded recursion `TaskM` without using the
  implementation details of `TaskM`. Whenever `TaskM.iterate` returns a
  continuation, the continuation will be *smaller* according to this
  relation.
  -/
</span><span class="alectryon-token"><span class="k">inductive</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.is_direct_cont</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.is_direct_cont</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Prop</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Prop</span><span class="alectryon-token">
| </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>running</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>} {<span class="fn">p </span>cont : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>} {<span class="fn">s </span>s' : <span class="fn"><span class="fn">spec</span>.State</span>} {<span class="fn">block_until</span> : <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>},
  <span class="fn"><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></span></span></span></span></div></blockquote></div></small></div>running</span><span class="alectryon-token">
    {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">}
    {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.10035</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn">?m.10038</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token">}
    {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>State</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn">Type</span></span></span></span></div></blockquote></div></small></div>State</span><span class="alectryon-token"> -> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Bool</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div>Bool</span><span class="alectryon-token">}
    (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token">.</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn">?m.10035</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> = </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IterationResult.Running</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn">(<span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span>) → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></span></div></blockquote></div></small></div>IterationResult.Running</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn">?m.10038</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token">)
    : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_direct_cont</var><b>: </b><span><span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">is_direct_cont</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> 

/-- See `TaskM.is_direct_cont` -/
</span><span class="alectryon-token"><span class="k">theorem</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.is_direct_cont_wf</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>}, <span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.is_direct_cont_wf</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} :
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>WellFounded</var><b>: </b><span><span class="fn">{<span class="fn">α</span> : <span class="fn">Sort ?u.10114</span>} → <span class="fn">(<span class="fn"><span class="fn">α</span> → <span class="fn">α</span> → <span class="fn">Prop</span></span>) → <span class="fn">Prop</span></span></span></span></span></div></blockquote></div></small></div>WellFounded</span><span class="alectryon-token"> (@</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_direct_cont</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>is_direct_cont</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">) :=</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk52" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk52"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">by</span></span><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk53" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk53"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">constructor</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h</span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">a</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">a</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk54" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk54"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk55" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk55"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h</span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">a</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">a</span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk56" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk56"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk57" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk57"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> : impl.TaskM spec T)</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk58" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk58"><span class="alectryon-wsp"><span class="alectryon-token">

  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk59" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk59"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">induction</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">using</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>WellFounded.induction</var><b>: </b><span><span class="fn">∀ {<span class="fn">α</span> : <span class="fn">Sort u</span>} {<span class="fn">r</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span> → <span class="fn">Prop</span></span>},
  <span class="fn"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">r</span></span> → <span class="fn">∀ {<span class="fn">C</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">Prop</span></span>} (<span class="fn">a</span> : <span class="fn">α</span>), <span class="fn">(<span class="fn">∀ (<span class="fn">x</span> : <span class="fn">α</span>), <span class="fn">(<span class="fn">∀ (<span class="fn">y</span> : <span class="fn">α</span>), <span class="fn"><span class="fn"><span class="fn">r</span> <span class="fn">y</span> <span class="fn">x</span></span> → <span class="fn"><span class="fn">C</span> <span class="fn">y</span></span></span></span>) → <span class="fn"><span class="fn">C</span> <span class="fn">x</span></span></span></span>) → <span class="fn"><span class="fn">C</span> <span class="fn">a</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>WellFounded.induction</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.hwf</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">?m.10203</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk60" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk60"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk61" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk61"><span class="alectryon-wsp"><span class="alectryon-token">.</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.hwf</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">?m.10203</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk62" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk62"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.hwf</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">?m.10203</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk63" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk63"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>impl.TaskM.is_direct_cont.wf</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>}, <span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">impl.TaskM.is_direct_cont</span></span></span></span></span></div></blockquote></div></small></div>impl.TaskM.is_direct_cont.wf</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk64" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk64"><span class="alectryon-wsp"><span class="alectryon-token">
  </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk65" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk65"><span class="alectryon-wsp"><span class="alectryon-token">.</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk66" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk66"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk67" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk67"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">clear</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk68" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk68"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk69" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk69"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk70" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk70"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk71" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk71"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rename_i</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn">?m.10202</span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IH</var><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn">?m.10202</span>), <span class="fn"><span class="fn"><span class="fn">?m.10203</span> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><span class="fn">?m.10205</span> <span class="fn">y</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">IH</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk72" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk72"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk73" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk73"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">constructor</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h</span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk74" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk74"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk75" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk75"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h</span></hr></span><div class="goal-conclusion"><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk76" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk76"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk77" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk77"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">intro</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont</var><b>: </b><span><span class="fn">?α</span></span></span></div></blockquote></div></small></div><span class="nv">cont</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_cont</var><b>: </b><span><span class="fn"><span class="fn">?r</span> <span class="fn">cont</span> <span class="fn">?x</span></span></span></span></div></blockquote></div></small></div><span class="nv">is_cont</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>is_cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">cont</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk78" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk78"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk79" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk79"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">apply</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>IH</var><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn">?m.10202</span>), <span class="fn"><span class="fn"><span class="fn">?m.10203</span> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><span class="fn">?m.10205</span> <span class="fn">y</span></span></span></span></span></span></div></blockquote></div></small></div><span class="nv">IH</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>is_cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.is_direct_cont">is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk80" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk80"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk81" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk81"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">cases</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_cont</var><b>: </b><span><span class="fn"><span class="fn">?r</span> <span class="fn">cont</span> <span class="fn">?x</span></span></span></span></div></blockquote></div></small></div><span class="nv">is_cont</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s✝, s'✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk82" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk82"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk83" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk83"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rename_i</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">?m.10280</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s'</var><b>: </b><span><span class="fn"><span class="fn">?m.10280</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s'</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>block_until</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">?m.10280</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></div></blockquote></div></small></div><span class="nv">block_until</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk84" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk84"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk85" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk85"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk86" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk86"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iterate</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult">IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span></span></span></div></blockquote></div></small></div>iterate</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk87" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk87"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk88" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk88"><span class="alectryon-wsp"><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">at</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.iterate">iterate</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk89" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk89"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk90" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk90"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">cases</span></span><span class="alectryon-token"> h : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>p</var><b>: </b><span><span class="fn">?m.10202</span></span></span></div></blockquote></div></small></div><span class="nv">p</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>s</var><b>: </b><span><span class="fn"><span class="fn">?m.10280</span>.State</span></span></span></div></blockquote></div></small></div><span class="nv">s</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Done</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk91" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk91"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk92" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk92"><span class="alectryon-wsp"><span class="alectryon-token"><;></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn">T</span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Done">impl.IterationResult.Done</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Done</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk93" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk93"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk94" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk94"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk95" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk95"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">h</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk96" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk96"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk97" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk97"><span class="alectryon-wsp"><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">at</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk98" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk98"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk99" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk99"><span class="alectryon-wsp"><span class="alectryon-token"><;></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk100" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk100"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk101" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk101"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">try</span></span><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><a href="../../.././Init/Prelude.html#String">String</a></span></span></span><br></br><span><var>iteration</var><span class="hyp-type"><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Panic</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk102" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk102"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">contradiction</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk103" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk103"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk104" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk104"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">injection</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>iteration</var><b>: </b><span><span class="fn">(<span class="fn">match <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span> with
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Done">IterationResult.Done</a> <span class="fn">s'</span> <span class="fn">t</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Panic">impl.IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Panic">IterationResult.Panic</a> <span class="fn">s'</span> <span class="fn">msg</span></span>
  | <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span> =&gt <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span>) <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM.IterationResult.Running">IterationResult.Running</a> <span class="fn">s'</span> <span class="fn">block_until</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">iteration</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk105" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk105"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk106" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk106"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rename_i</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont'_def</var><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont'_def</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>cont'_def</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk107" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk107"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk108" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk108"><span class="alectryon-wsp"><span class="alectryon-token">;</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>cont'_def</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk109" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk109"><span class="alectryon-wsp"><span class="alectryon-token"> </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk110" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk110"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">rw</span></span><span class="alectryon-token"> [</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></span><br></br><span><var>cont'_def</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk111" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk111"><span class="alectryon-wsp"><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>cont'_def</var><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></div></blockquote></div></small></div><span class="nv">cont'_def</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>cont'_def</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk112" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk112"><span class="alectryon-wsp"><span class="alectryon-token">]</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>cont'_def</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk113" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk113"><span class="alectryon-wsp"><span class="alectryon-token"> </span><span class="alectryon-token"><span class="k">at</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">a✝</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">h</span></span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="fn">∀ (<span class="fn">y</span> : <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>), <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">y</span> <span class="fn">p</span></span> → <span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">y</span></span></span></span></span></span></span><br></br><span><var>cont</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br><span><var>s, s'</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>block_until</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝²</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">spec</span>.State</span></span></span></span><br></br><span><var>a✝¹</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></span></span></span><br></br><span><var>a✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">spec</span>.State</span> → <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult">impl.IterationResult</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span></span><br></br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">cont</span></span></span></span></span></span><br></br><span><var>cont'_def</var><span class="hyp-type"><b>: </b><span><span class="fn"><span class="fn">a✝</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cont</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h.h.a.running.Running</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM.is_direct_cont">impl.TaskM.is_direct_cont</a> <span class="fn">cont</span> <span class="fn">p</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk114" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk114"><span class="alectryon-wsp"><span class="alectryon-token">
    </span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>spec</var><span class="hyp-type"><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></span><br></br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="fn">Type</span></span></span></span><br></br><span><var>p, x✝</var><span class="hyp-type"><b>: </b><span><span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.TaskM">impl.TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span></span></span></span><br></br></div><span class="goal-separator"><hr><span class="goal-name">h.h</span></hr></span><div class="goal-conclusion"><span class="fn"><a href="../../.././Init/WF.html#Acc">Acc</a> <span class="fn">is_direct_cont</span> <span class="fn">x✝</span></span></div></blockquote></div></small></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="plain-lean4-lean-chk115" style="display: none" type="checkbox"></input><label class="alectryon-input" for="plain-lean4-lean-chk115"><span class="alectryon-wsp"><span class="alectryon-token"><span class="k">exact</span></span><span class="alectryon-token"> ⟨</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>h</var><b>: </b><span><span class="fn"><span class="fn"><span class="fn">p</span> <span class="fn">s</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mt/Task/Impl.html#Mt.TaskM.impl.IterationResult.Running">impl.IterationResult.Running</a> <span class="fn">a✝²</span> <span class="fn">a✝¹</span> <span class="fn">cont</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">h</span></span><span class="alectryon-token">⟩</span></span></label><small class="alectryon-output"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"></div><span class="goal-separator"><hr><span class="goal-name"></span></hr></span><div class="goal-conclusion">Goals accomplished! 🐙</div></blockquote></div></small></span><span class="alectryon-wsp"><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">instance</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM.instWf</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><a href="../../.././Init/WF.html#WellFoundedRelation">WellFoundedRelation</a> (<span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span>)</span></span></span></span></span></div></blockquote></div></small></div><span class="nv">TaskM.instWf</span></span><span class="alectryon-token"> {</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token"> : </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>Type</var><b>: </b><span><span class="fn">Type 1</span></span></span></div></blockquote></div></small></div>Type</span><span class="alectryon-token">} :
  </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>WellFoundedRelation</var><b>: </b><span><span class="fn"><span class="fn">Sort ?u.10763</span> → <span class="fn">Sort (max 1 ?u.10763)</span></span></span></span></div></blockquote></div></small></div>WellFoundedRelation</span><span class="alectryon-token"> (</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>TaskM</var><b>: </b><span><span class="fn"><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a> → <span class="fn"><span class="fn">Type</span> → <span class="fn">Type</span></span></span></span></span></div></blockquote></div></small></div>TaskM</span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>spec</var><b>: </b><span><a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a></span></span></div></blockquote></div></small></div><span class="nv">spec</span></span><span class="alectryon-token"> </span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>T</var><b>: </b><span><span class="fn">Type</span></span></span></div></blockquote></div></small></div><span class="nv">T</span></span><span class="alectryon-token">) </span><span class="alectryon-token"><span class="k">where</span></span><span class="alectryon-token">
  rel :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_direct_cont</var><b>: </b><span><span class="fn">{<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} → <span class="fn">{<span class="fn">T</span> : <span class="fn">Type</span>} → <span class="fn"><span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn"><a href="../../.././Mt/Task/Basic.html#Mt.TaskM">TaskM</a> <span class="fn">spec</span> <span class="fn">T</span></span> → <span class="fn">Prop</span></span></span></span></span></span></div></blockquote></div></small></div>is_direct_cont</span><span class="alectryon-token">
  wf  :=</span><span class="alectryon-token"><div class="alectryon-type-info-wrapper"><small class="alectryon-type-info"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span class="hyp-type"><var>is_direct_cont_wf</var><b>: </b><span><span class="fn">∀ {<span class="fn">spec</span> : <a href="../../.././Mt/Reservation.html#Mt.Spec">Spec</a>} {<span class="fn">T</span> : <span class="fn">Type</span>}, <span class="fn"><a href="../../.././Init/WF.html#WellFounded">WellFounded</a> <span class="fn">is_direct_cont</span></span></span></span></span></div></blockquote></div></small></div>is_direct_cont_wf</span><span class="alectryon-token">

</span><span class="alectryon-token"><span class="k">end</span></span><span class="alectryon-token"> Mt
</span></span></pre></article></body></html>